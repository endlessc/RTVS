(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.CvNetVideo=e()}})(function(){var e,t,i;return function(){function f(s,a,o){function u(i,e){if(!a[i]){if(!s[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(h)return h(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[i]={exports:{}};s[i][0].call(r.exports,function(e){var t=s[i][1][e];return u(t||e)},r,r.exports,f,s,a,o)}return a[i].exports}for(var h="function"==typeof require&&require,e=0;e<o.length;e++)u(o[e]);return u}return f}()({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();var r=e("../helper/ByteHelper");var p=l(r);var s=e("../events");var a=l(s);var o=e("../utils/logger");var h=l(o);var u=e("../utils/cvComm");var f=l(u);function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var b=function(){function S(e){d(this,S);this.wfs=e;this.msg_serial_number=0;this.v2=true}n(S,[{key:"JT1078808Package7",value:function e(t,i,n,r){var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;return this.JT1078808Package(t,i,n,r,s,a,7)}},{key:"JT1078808Package",value:function e(t,i,n,r){var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:8;if(s==null){s=n}var u=0;if(i){u=i.GetLength()}var h=new S.JTHeader(t,false,0,u,s,this.msg_serial_number);this.msg_serial_number=this.msg_serial_number+1>255?0:this.msg_serial_number+1;var f=0;var l;l=new Uint8Array(u+h.GetLength());h.GetBinaryData(l,f);f+=h.GetLength();if(u>0){i.GetBinaryData(l,f)}var d=new S.JT808Package(l,0,l.length);var c=new S.JTRTHead(false,a,0,n,r,o,0,0,0,0,d.length);f=0;var g=new Uint8Array(c.GetLength()+d.length);c.GetBinaryData(g,0);f+=c.GetLength();for(var v=0;v<d.length;v++){g[f++]=d[v]}return{binary:g,head:h}}},{key:"Send9101",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var a=new S.JTRealVideoTransferRequest("",0,0,i,n,r);var o=this.JT1078808Package(37121,a,t,i,t,s);this.Send(o.binary)}},{key:"Send9102",value:function e(t,i,n,r,s){var a=new S.JTRealVideoTransferControl(t,i,n,r,s);var o=this.JT1078808Package(37122,a,t,i);this.Send(o.binary)}},{key:"Send9201",value:function e(t,i,n,r,s,a,o,u,h,f){var l=arguments.length>10&&arguments[10]!==undefined?arguments[10]:0;var d=new S.JTVideoPlaybackRequest("",0,0,i,n,r,s,a,o,u,h,f);var c=this.JT1078808Package(37377,d,t,i,t,l);this.Send(c.binary)}},{key:"Send9202",value:function e(t,i,n,r,s){var a=new S.JTVideoPlaybackControl(i,n,r,s);var o=this.JT1078808Package(37378,a,t,i);this.Send(o.binary)}},{key:"Send9205",value:function e(t,i,n,r,s,a,o,u,h,f,l){var d=new S.JTQueryVideoFileList(n,r,s,a,o,u,h,f);var c=this.JT1078808Package(37381,d,i,n);t.sendMessage(c.binary,l,4613,c.head.SerialNumber)}},{key:"Send9206",value:function e(t,i,n,r,s,a,o,u,h,f,l,d,c,g,v,y){var T=new S.JTVideoFileUpload(n,r,s,a,o,u,h,f,l,d,c,g,v);var w=this.JT1078808Package(37382,T,i,n);t.sendMessage(w.binary,y,4614)}},{key:"Send9207",value:function e(t,i,n,r){var s=new S.JTVideoFileUploadControl(n,r);var a=this.JT1078808Package(37383,s,t,i);this.Send(a.binary)}},{key:"Send9301",value:function e(t,i,n,r){var s=new S.JTRTPTZRotate(i,n,r);var a=this.JT1078808Package(37633,s,t,i);this.Send(a.binary)}},{key:"Send9302",value:function e(t,i,n){var r=new S.JTRPTZControl(i,n);var s=this.JT1078808Package(37634,r,t,i);this.Send(s.binary)}},{key:"Send9303",value:function e(t,i,n){var r=new S.JTRPTZControl(i,n);var s=this.JT1078808Package(37635,r,t,i);this.Send(s.binary)}},{key:"Send9304",value:function e(t,i,n){var r=new S.JTRPTZControl(i,n);var s=this.JT1078808Package(37636,r,t,i);this.Send(s.binary)}},{key:"Send9305",value:function e(t,i,n){var r=new S.JTRPTZControl(i,n);var s=this.JT1078808Package(37637,r,t,i);this.Send(s.binary)}},{key:"Send9306",value:function e(t,i,n){var r=new S.JTRPTZControl(i,n);var s=this.JT1078808Package(37638,r,t,i);this.Send(s.binary)}},{key:"Send8881",value:function e(t,i,n){var r=new S.JTPrioritySetExt(n);var s=this.JT1078808Package(34945,r,t,i);this.Send(s.binary)}},{key:"Send9101Webrtc",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;this.Send9101_SpecialSim(this.GetWebrtcSim(t),t,i,n,r)}},{key:"Send9201Webrtc",value:function e(t,i,n,r,s,a,o,u,h,f){this.Send9201_SpecialSim(this.GetWebrtcSim(t),t,i,n,r,s,a,o,u,h,f)}},{key:"Send8801",value:function e(t,i,n){var r=new S.JT0x8886(5,n,null,null);var s=this.JT1078808Package(34950,r,t,i);this.Send(s.binary)}},{key:"SendHeartRtmp",value:function e(t,i,n,r){var s=new S.JT0x8886(6,null,n,r);var a=this.JT1078808Package(34950,s,t,i);this.Send(a.binary)}},{key:"Send9101Rtmp",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;this.Send9101_SpecialSim(this.GetRtmpSim(t),t,i,n,r)}},{key:"Send9201Rtmp",value:function e(t,i,n,r,s,a,o,u,h,f){this.Send9201_SpecialSim(this.GetRtmpSim(t),t,i,n,r,s,a,o,u,h,f)}},{key:"Send9101_SpecialSim",value:function e(t,i,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;var a=new S.JTRealVideoTransferRequest("",0,0,n,r,s);var o=this.JT1078808Package7(37121,a,i,n,t);this.Send(o.binary)}},{key:"Send9201_SpecialSim",value:function e(t,i,n,r,s,a,o,u,h,f,l){var d=new S.JTVideoPlaybackRequest("",0,0,n,r,s,a,o,u,h,f,l);var c=this.JT1078808Package7(37377,d,i,n,t);this.Send(c.binary)}},{key:"SendAudio",value:function e(t,i,n,r,s,a){var o=new S.JTRTHead(1,s,r,t,i,3,0,a,0,0,n.length);var u=new Uint8Array(o.GetLength()+n.length);o.GetBinaryData(u,0);var h=o.GetLength();for(var f=0;f<n.length;f++){u[h++]=n[f]}this.Send(u)}},{key:"Send",value:function e(t){this.wfs.trigger(a.default.WEBSOCKET_DATA_UPLOADING,{data:t})}},{key:"GetRtmpSim",value:function e(t){var i="1234888888ec";if(i==t.toLowerCase()){return"1234888888eb"}return i}},{key:"GetWebrtcSim",value:function e(t){var i="1234888888ee";if(i==t.toLowerCase()){return"1234888888ed"}return i}}]);return S}();b.GetFirstSerialNumber=function(e){var t=void 0;if(e.PackInfo){t=e.SerialNumber-e.PackInfo.Index+1}else{t=e.SerialNumber}return t};b.GetMsbBody=function(e,t){var i=e.GetLength();return t.slice(i,i+e.MsgLen)};b.JTRTHead=function(n,r,s,a,o,u,h,f,l,d,c){this.V=2;this.P=false;this.X=false;this.CC=1;this.M=n;this.PT=r;this.SerialNumber=s;this.Sim=a;this.Channel=o;this.XXXX=u;this.YYYY=h;this.RTTimeSpan=f;this.LastIFrameInterval=l;this.LastFrameInterval=d;this.DLen=c;this.BinaryDataLen=0;this.FillByBinary=function(e,t,i){if(isNaN(t)){t=0}if(isNaN(i)){i=e.length}var n=t;if(e[n]===48&&e[n+1]===49&&e[n+2]===99&&e[n+3]===100){n+=4;this.V=e[n]>>6;this.P=(e[n]&32)===32;this.X=(e[n]&16)===16;this.CC=e[n]&15;n+=1;this.M=(e[n]&128)===128;this.PT=e[n]&127;n+=1;this.SerialNumber=p.default.Byte2ToUInt(e,n);n+=2;this.Sim=p.default.BcdToString(e,n,12);n+=6;this.Channel=e[n];n+=1;this.XXXX=e[n]>>4;this.YYYY=e[n]&15;n+=1;if(this.XXXX<4){this.RTTimeSpan=p.default.Byte8ToULong(e,n);n+=8}if(this.XXXX<3){this.LastIFrameInterval=p.default.Byte2ToUInt(e,n);n+=2;this.LastFrameInterval=p.default.Byte2ToUInt(e,n);n+=2}this.DLen=p.default.Byte2ToUInt(e,n);n+=2;this.BinaryDataLen=n-t}};this.GetBinaryData=function(e,t){var i=t;if(u>=4){p.default.UIntToByte2(e,i+16,c)}else if(u===3){p.default.ULongToByte8(e,i+16,f);p.default.UIntToByte2(e,i+24,c)}else{p.default.ULongToByte8(e,i+16,f);p.default.UIntToByte2(e,i+24,l);p.default.UIntToByte2(e,i+26,d);p.default.UIntToByte2(e,i+28,c)}e[i++]=48;e[i++]=49;e[i++]=99;e[i++]=100;e[i++]=129;if(n==1){e[i++]=r|128}else{e[i++]=r}p.default.UIntToByte2(e,i,s);i+=2;p.default.StringToBcd(e,i,a,12);i+=6;e[i++]=o;e[i++]=u<<4&240|h&15};this.GetLength=function(){if(u>=4){return 18}else if(u===3){return 26}else{return 30}}};b.JTHeader=function(n,r,s,a,o,u){this.MsgId=n;this.Sub=r;this.DataEncryptType=s;this.MsgLen=a;this.Sim=o;this.SerialNumber=u;this.Length=0;this.PackInfo=null;this.FillByBinary=function(e,t,i){var n=t;this.MsgId=p.default.Byte2ToUInt(e,n);this.Sub=(e[n+2]&32)===32;this.DataEncryptType=(e[n+2]&28)>>2;e[n+2]=e[n+2]&3;this.MsgLen=p.default.Byte2ToUInt(e,n+2);this.Sim=p.default.BcdToString(e,n+4,12);this.SerialNumber=p.default.Byte2ToUInt(e,n+10);if(this.Sub){this.PackInfo=new b.JTPackageInfo;this.PackInfo.Sum=p.default.Byte2ToUInt(e,t+12);this.PackInfo.Index=p.default.Byte2ToUInt(e,t+14)}};this.GetBinaryData=function(e,t){var i=t;p.default.UIntToByte2(e,i,n);i+=2;p.default.UIntToByte2(e,i,a);i+=2;e[t+2]=e[t+2]&63;if(!r){e[t+2]=e[t+2]&223}e[2]=e[2]|s<<2;p.default.StringToBcd(e,i,o,12);i+=6;p.default.UIntToByte2(e,i,u)};this.GetLength=function(){return this.Sub?16:12}};b.JTPackageInfo=function(e,t){this.Index=e;this.Sum=t};b.JTRealVideoTransferRequest=function(i,n,r,s,a,o){this.IPAddress=i;this.TcpPort=n;this.UdpPort=r;this.Channel=s;this.DataType=a;this.StreamType=o;this.Length=0;this.GetBinaryData=function(e,t){e[t]=p.default.StringToGBK(e,t+1,i);t=t+1+e[t];p.default.UIntToByte2(e,t,n);t+=2;p.default.UIntToByte2(e,t,r);t+=2;e[t++]=s;e[t++]=a;e[t++]=o};this.GetLength=function(){var e=i.length;return e+8}};b.JTRealVideoTransferControl=function(i,n,r,s){this.Channel=i;this.ControlCommand=n;this.SwitchStreamType=r;this.TurnOffMediaType=s;this.GetBinaryData=function(e,t){e[t]=i;t+=1;e[t]=n;t+=1;e[t]=s;t+=1;e[t]=r;t+=1};this.GetLength=function(){return 4}};b.JTVideoPlaybackRequest=function(r,s,a,o,u,h,f,l,d,c,g,v){this.IPAddress=r;this.TcpPort=s;this.UdpPort=a;this.Channel=o;this.MediaType=u;this.StreamType=h;this.StorageType=f;this.PlaybackMode=l;this.Multiple=d;this.StartTime=c;this.EndTime=g;this.DataSource=v;this.Length=0;this.GetBinaryData=function(e,t){e[t]=p.default.StringToGBK(e,t+1,r);t=t+1+e[t];p.default.UIntToByte2(e,t,s);t+=2;p.default.UIntToByte2(e,t,a);t+=2;e[t++]=o;e[t++]=u;e[t++]=h;e[t++]=f;e[t++]=l;e[t++]=d;var i=b.GetYYMMddHHmmssByDate(c);p.default.StringToBcd(e,t,i,12);t+=6;if(g===""){p.default.StringToBcd(e,t,"000000000000",12)}else{var n=b.GetYYMMddHHmmssByDate(g);p.default.StringToBcd(e,t,n,12)}t+=6;e[t++]=v};this.GetLength=function(){var e=r.length;return e+24}};b.JTVideoPlaybackControl=function(n,r,s,a){this.Channel=n;this.PlaybackControl=r;this.Multiple=s;this.DragPlaybackPosition=a;this.GetBinaryData=function(e,t){e[t]=n;t+=1;e[t]=r;t+=1;e[t]=s;t+=1;if(r===5){var i=b.GetYYMMddHHmmssByDate(a);p.default.StringToBcd(e,t,i,12);t+=6}};this.GetLength=function(){return 9}};b.JTQueryVideoFileList=function(a,o,u,h,f,l,d,c){this.Channel=a,this.StartTime=o,this.EndTime=u,this.Alarm=h,this.MediaType=f,this.StreamType=l,this.StorageType=d,this.DataSource=c;this.GetBinaryData=function(e,t){e[t]=a;t+=1;if(o===0){p.default.StringToBcd(e,t,"000000000000",12)}else{var i=b.UnixLongToDate(o);var n=b.GetYYMMddHHmmssByDate(i);p.default.StringToBcd(e,t,n,12)}t+=6;if(u===0){p.default.StringToBcd(e,t,"000000000000",12)}else{var r=b.UnixLongToDate(u);var s=b.GetYYMMddHHmmssByDate(r);p.default.StringToBcd(e,t,s,12)}t+=6;p.default.ULongToByte8(e,t,h);t+=8;e[t]=f;t+=1;e[t]=l;t+=1;e[t]=d;t+=1;e[t]=c;t+=1};this.GetLength=function(){return 25}};b.JTVideoFileUpload=function(u,h,f,l,d,c,g,v,y,T,w,S,m){this.Channel=u;this.FtpAddress=h;this.FtpPort=f;this.UserName=l;this.Password=d;this.FileUploadPath=c;this.StartTime=g;this.EndTime=v;this.Alarm=y;this.MediaType=T;this.StreamType=w;this.StorageType=S;this.TaskExecutionCondition=m;this.GetBinaryData=function(e,t){var i=p.default.StringToGBK(e,t+1,h);e[t]=i;t+=1;t+=i;p.default.UIntToByte2(e,t,f);t+=2;var n=p.default.StringToGBK(e,t+1,l);e[t]=n;t+=1;t+=n;var r=p.default.StringToGBK(e,t+1,d);e[t]=r;t+=1;t+=r;var s=p.default.StringToGBK(e,t+1,c);e[t]=s;t+=1;t+=s;e[t]=u;t+=1;var a=b.GetYYMMddHHmmssByDate(g);p.default.StringToBcd(e,t,a,12);t+=6;var o=b.GetYYMMddHHmmssByDate(v);p.default.StringToBcd(e,t,o,12);t+=6;p.default.ULongToByte8(e,t,y);t+=8;e[t]=T;t+=1;e[t]=w;t+=1;e[t]=S;t+=1;e[t]=m;t+=1};this.GetLength=function(){return 31+h.length+l.length+d.length+c.length}};b.JTVideoFileUploadControl=function(i,n){this.SerialNumber=i;this.UploadControl=n;this.GetBinaryData=function(e,t){p.default.UIntToByte2(e,t,i);t+=2;e[t]=n;t+=1};this.GetLength=function(){return 3}};b.JTRTPTZRotate=function(i,n,r){this.LogicalChannel=i;this.Direction=n;this.Speed=r;this.GetBinaryData=function(e,t){e[t]=i;t+=1;e[t]=n;t+=1;e[t]=r;t+=1};this.GetLength=function(){return 3}};b.JTRPTZControl=function(i,n){this.Channel=i;this.Flag=n;this.GetBinaryData=function(e,t){e[t]=i;t+=1;e[t]=n;t+=1};this.GetLength=function(){return 2}};b.JT808Package=function(e,t,i){var n=i+2;var r=t;var s=0;for(;r<i+t;r++){s=e[r]^s;if(e[r]===126){n++}if(e[r]===125){n++}}if(s===126){n+=2}else if(s===125){n+=2}else{n+=1}var a=new Uint8Array(n);var o=0;a[o++]=126;s=0;for(r=t;r<i+t;r++,o++){a[o]=e[r];s=e[r]^s;if(e[r]===126){e[r]=125;o++;a[o]=1}if(e[r]===125){o++;a[o]=2}}if(s===126){a[o++]=125;a[o++]=2}else if(s===125){a[o++]=125;a[o++]=1}else{a[o++]=s}a[o++]=126;return a};b.JTVideoListInfo=function(){this.SerialNumber;this.FileCount;this.FileList;this.FillByBinary=function(e,t,i){this.FileList=[];var n=t;this.SerialNumber=p.default.Byte2ToUInt(e,n);n+=2;this.FileCount=p.default.Byte4ToUInt(e,n);n+=4;if(this.FileCount>0&&e.length>=28*this.FileCount+n){for(var r=0;r<this.FileCount;r++){var s=new b.JTVideoFileListItem;s.FillByBinary(e,n);this.FileList.push(s);n+=28}}}};b.JTVideoFileListItem=function(){this.Channel;this.StartTime;this.EndTime;this.Alarm;this.MediaType;this.StreamType;this.StorageType;this.FileSize;this.FillByBinary=function(e,t){this.Channel=e[t];t+=1;this.StartTime=p.default.BcdToString(e,t,12);t+=6;this.EndTime=p.default.BcdToString(e,t,12);t+=6;this.Alarm=p.default.Byte8ToULong(e,t);t+=8;this.MediaType=e[t];t+=1;this.StreamType=e[t];t+=1;this.StorageType=e[t];t+=1;this.FileSize=p.default.Byte4ToUInt(e,t);t+=4}};b.JTVideoFileUploadEndInform=function(){this.SerialNumber;this.Result;this.FillByBinary=function(e,t){this.SerialNumber=p.default.Byte2ToUInt(e,t);t+=2;this.Result=e[t];t+=1}};b.MedisPackageAnalysis=function(){this.least_header_size=18;this.head=new b.JTRTHead;this.m_head_size=0;this.m_data_offset=0;this.m_data_size=0;this.AnalysisPackage=function(e,t,i){if(i<this.least_header_size)return 0;var n=t;if(e[n]==48&&e[n+1]==49&&e[n+2]==99&&e[n+3]==100){n+=5;this.head.PT=e[n]&127;n+=1;this.head.SerialNumber=p.default.Byte2ToUInt(e,n);n+=2;this.head.Sim=p.default.BcdToString(e,n,12);n+=6;this.head.Channel=e[n];n+=1;this.head.XXXX=e[n]>>4;this.head.YYYY=e[n]&15;n+=1;if(this.head.XXXX<4){if(i<26)return 0;this.head.RTTimeSpan=p.default.Byte8ToULong(e,n);n+=8}if(this.head.XXXX<3){if(i<30)return 0;n+=4}this.head.DLen=p.default.Byte2ToUInt(e,n);n+=2;if(i<n+this.head.DLen-t)return 0;this.m_head_size=n-t;this.m_data_offset=t;this.m_data_size=this.m_head_size+this.head.DLen;return this.m_data_size}else{return-1}}};b.SplitData=function(){var u=[];this.SplitDataBy7E=function(e,t,i,n){try{var r=0;var s=false;var a=false;var o=[];if(u!=[]&&(i>0&&e[t]!=126||i>1&&e[t]==126&&e[t+1]==126)){o=u;s=false;if(u.length>0)a=u[u.length-1]==125}else{o=[];s=true;a=false}while(r<i){if(e[t+r]==126){s=!s;if(s){try{n(o)}catch(e){h.default.error("SplitDataBy7E analyze exeception:"+e)}}else{while(i>r+1&&e[t+r+1]==126){r++}o=[]}}else if(a){if(e[t+r]==1)o[o.length-1]=125;else if(e[t+r]==2)o[o.length-1]=126;else{h.default.error("ErrorBinaryData7E");break}}else{o.push(e[t+r])}a=e[t+r]==125;r++}u=s?[]:o}catch(e){h.default.error("SplitDataBy7E exception:"+e)}}};b.CheckHelper=function(){this.CheckXOR=function(e,t,i){var n=0;for(var r=0;r<i;r++){n=(e[r+t]^n)&255}return n}};b.GetYYMMddHHmmssByDate=function(e){try{var t="";var i=b.ParseDate(e);var n=i.getFullYear()-2e3;t+=(n+"").length<2?"0"+n:n;var r=i.getMonth()+1;t+=(r+"").length<2?"0"+r:r;var s=i.getDate();t+=(s+"").length<2?"0"+s:s;var a=i.getHours();t+=(a+"").length<2?"0"+a:a;var o=i.getMinutes();t+=(o+"").length<2?"0"+o:o;var u=i.getSeconds();t+=(u+"").length<2?"0"+u:u;return t}catch(e){h.default.error("Datetime format must match:yyyy-mm-dd hh:mm:ss");return""}};b.ParseDate=function(e){var t=Date.parse(e);if(isNaN(t)){return new Date(Date.parse(e.replace(/-/g,"/")))}else{return new Date(t)}};b.DateToUnixLong=function(e){return Date.parse(b.ParseDate(e))/1e3};b.UnixLongToDate=function(e){return new Date(e*1e3)};b.JTPrioritySetExt=function(i){this.Priority=i;this.GetBinaryData=function(e,t){e[t]=i;t+=1};this.GetLength=function(){return 1}};b.ExtendRefuse=function(){this.DLen;this.Reason;this.FillByBinary=function(e,t,i){if(isNaN(t)){t=0}if(isNaN(i)){i=e.length}var n=t;this.DLen=p.default.Byte2ToUInt(e,n);n+=2;this.Reason=r(e,n,this.DLen)};function r(e,t,i){var n="",r=e;for(var s=t;s<i+t;s++){var a=r[s].toString(2),o=a.match(/^1+?(?=0)/);if(o&&a.length==8){var u=o[0].length;var h=r[s].toString(2).slice(7-u);for(var f=1;f<u;f++){h+=r[f+s].toString(2).slice(2)}n+=String.fromCharCode(parseInt(h,2));s+=u-1}else{n+=String.fromCharCode(r[s])}}return n}};b.JT0x8886=function(n,r,s,a){this.Type=n;this.WebrtcRoomid=r;this.RtmpURL=s;this.RtmpClientId=a;this.Length=0;this.GetBinaryData=function(e,t){e[t]=n;t+=1;if(n==5){var i=p.default.StringToGBK(e,t+2,r);p.default.UIntToByte2(e,t,i)}if(n==6){var i=p.default.StringToGBK(e,t+2,s);p.default.UIntToByte2(e,t,i);t=t+2+i;i=p.default.StringToGBK(e,t+2,a);p.default.UIntToByte2(e,t,i)}};this.GetLength=function(){var e=1;if(n==5){e+=r.length+2}if(n==6){e+=s.length+a.length+4}return e}};b.JT0x0889=function(){this.ASerial;this.Type;this.Url;this.FillByBinary=function(e,t,i){this.ASerial=p.default.Byte2ToUInt(e,t);this.Type=e[t+2];this.Url=p.default.GBKToString(e,t+3,i-3)}};b.JT0x8889=function(){this.Wss=f.default.IsHttps();this.GetBinaryData=function(e,t){if(this.Wss){e[t]=1}else{e[t]=0}};this.GetLength=function(){return 1}};b.JT0x8890=function(){this.NType;this.Notice;this.FillByBinary=function(e,t,i){this.NType=p.default.Byte2ToUInt(e,t);var n=p.default.Byte2ToUInt(e,t+2);this.Notice=p.default.Utf8ArrayToStr(e,t+4,n)}};i.default=b},{"../events":2,"../helper/ByteHelper":3,"../utils/cvComm":8,"../utils/logger":9}],2:[function(e,t,i){"use strict";t.exports={MEDIA_ATTACHING:"wfsMediaAttaching",MEDIA_ATTACHED:"wfsMediaAttached",FRAG_LOADING:"wfsFragLoading",BUFFER_CREATED:"wfsBufferCreated",BUFFER_APPENDING:"wfsBufferAppending",BUFFER_RESET:"wfsBufferReset",FRAG_PARSING_DATA:"wfsFragParsingData",FRAG_PARSING_INIT_SEGMENT:"wfsFragParsingInitSegment",H264_DATA_PARSING:"wfsH264DataParsing",WEBSOCKET_ATTACHED:"wfsWebsocketAttached",WEBSOCKET_ATTACHING:"wfsWebsocketAttaching",WEBSOCKET_DATA_UPLOADING:"wfsWebsocketDataUploading",WEBSOCKET_MESSAGE_SENDING:"wfsWebsocketMessageSending",WEBSOCKET_CLOSE:"wfsWebsocketClose",WEBSOCKET_OPEN:"wfsWebsocketOpen",FILE_HEAD_LOADING:"wfsFileHeadLoading",FILE_HEAD_LOADED:"wfsFileHeadLoaded",FILE_DATA_LOADING:"wfsFileDataLoading",FILE_DATA_LOADED:"wfsFileDataLoaded",FILE_PARSING_DATA:"wfsFileParsingData",JT1078_DATA_PARSING:"wfsJT1078DataParsing",JT1078_PCM_OUT:"wfsJT1078PcmOut",JT1078_RGB_OUT:"wfsJT1078RgbOut",JT1078ToFMp4_DATA_PARSING:"wfsJT1078ToFMp4DataParsing",WEBRTC_SFU_INFO:"wfsWebrtcSFUInfo",HLS_INFO:"wfsHlsInfo",SPEEK_DATA:"wfsSpeekParsingData",WEBRTC_SRS_MSG:"wfsWebrtcSrsInfo"}},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();var n=e("../utils/long");var s=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function n(){o(this,n)}r(n,[{key:"toHex",value:function e(t){return n.toHex(t)}}],[{key:"concatenate",value:function e(t,i){var n=0;var r=true;var s=false;var a=undefined;try{for(var o=i[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var h=u.value;n+=h.length}}catch(e){s=true;a=e}finally{try{if(!r&&o.return){o.return()}}finally{if(s){throw a}}}var f=new t(n);var l=0;var d=true;var c=false;var g=undefined;try{for(var v=i[Symbol.iterator](),y;!(d=(y=v.next()).done);d=true){var T=y.value;f.set(T,l);l+=T.length}}catch(e){c=true;g=e}finally{try{if(!d&&v.return){v.return()}}finally{if(c){throw g}}}return f}},{key:"toHex",value:function e(t){var i=t.toString(16);if(i.length<2){return"0"+i}return i}},{key:"Byte2ToUInt",value:function e(t,i){return t[i+1]|t[i]<<8}},{key:"Byte4ToUInt",value:function e(t,i){return t[i+3]|t[i+2]<<8|t[i+1]<<16|t[i]<<24}},{key:"BcdToString",value:function e(t,i,n){var r="";for(var s=0;s<n/2;s++){r+=this.toHex(t[i+s])}return r}},{key:"StringTimeToUnixLong",value:function e(t){var i=parseInt("20"+t.substring(0,2));var n=parseInt(t.substring(2,4));var r=parseInt(t.substring(4,6));var s=parseInt(t.substring(6,8));var a=parseInt(t.substring(8,10));var o=parseInt(t.substring(10,12));if(r==0||n==0||n>12||r>31||s>24||a>60||o>60){return}var u=i+"-"+n+"-"+r+" "+s+":"+a+":"+o;return parseInt(new Date(u).getTime()/1e3)}},{key:"StringToBcd",value:function e(t,i,n,r){while(n.length<r){n="0"+n}for(var s=0;s<r/2;s++){t[i+s]=parseInt("0x"+n.substring(s*2,s*2+2))}}},{key:"Byte8ToULong",value:function e(t,i){return new s.default(n.Byte4ToUInt(t,i+4),n.Byte4ToUInt(t,i),true)}},{key:"UIntToByte2",value:function e(t,i,n){t[i++]=n>>8&255;t[i++]=n&255}},{key:"IntToByte4",value:function e(t,i,n){t[i++]=n>>24&255;t[i++]=n>>16&255;t[i++]=n>>8&255;t[i++]=n&255}},{key:"ULongToByte8",value:function e(t,i,n){if(!s.default.isLong(n)){n=s.default.fromString(n.toString(),true)}var r=n.toBytesBE();t[i++]=r[0];t[i++]=r[1];t[i++]=r[2];t[i++]=r[3];t[i++]=r[4];t[i++]=r[5];t[i++]=r[6];t[i++]=r[7]}},{key:"StringToGBK",value:function e(t,i,n){for(var r=0;r<n.length;r++){t[i+r]=n.charCodeAt(r)}return n.length}},{key:"GBKToString",value:function e(t,i,n){if(i===undefined){i=0}if(n===undefined){n=t.length}var r="";for(var s=0;s<n;s++){r+=String.fromCharCode(t[s+i])}return r}},{key:"Utf8ArrayToStr",value:function e(t,i,n){if(i===undefined){i=0}if(n===undefined){n=t.length}var r,s,n,a;var o,u;r="";n=n;s=i;while(s-i<n){a=t[s++];switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(a);break;case 12:case 13:o=t[s++];r+=String.fromCharCode((a&31)<<6|o&63);break;case 14:o=t[s++];u=t[s++];r+=String.fromCharCode((a&15)<<12|(o&63)<<6|(u&63)<<0);break}}return r}}]);return n}();i.default=u},{"../utils/long":10}],4:[function(e,t,i){"use strict";t.exports=e("./rtvswx.js").default},{"./rtvswx.js":7}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();var r=e("../JX/JTT1078");var a=u(r);var s=e("../utils/logger");var o=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function t(e){h(this,t);this.wfs=e;this.jt1078=new a.default(this)}n(t,[{key:"destroy",value:function e(){this.close()}},{key:"trigger",value:function e(t,i){this.wss.send({data:i.data.buffer,complete:function e(t){o.default.debug("sendSocketMessage",t)}})}},{key:"conn",value:function e(t,i,n,r){this.callback=r;var s=this;var a=true;this.wss=wx.connectSocket({url:"wss://"+t+":"+i,complete:function e(t){o.default.debug("connectSocket",t)}});this.wss.onClose(function(e){o.default.debug("SocketClosed",e);if(this.wfs.config.events){if(this.wfs.config.events.onWsClose){this.wfs.config.events.onWsClose(this.wfs.video_id,this.wfs)}if(this.wfs.config.events.onServerNotice){this.wfs.config.events.onServerNotice("onWsClose",this.wfs.video_id,this.wfs)}this.wfs.Stop()}}.bind(this));this.wss.onMessage(function(e){s.receive(e)});this.wss.onOpen(function(e){if(a){a=false;o.default.debug("onSocketOpen",e);n()}});if(a&&this.wss.readyState==1){a=false;o.default.debug("onSocketOpen2",res);n()}}},{key:"close",value:function e(){if(this.wss){this.wss.close({complete:function e(t){o.default.debug("closeSocket",t)}});this.wss=null}}},{key:"receive",value:function e(t){var i=new Uint8Array(t.data);if(i[0]==126&&i[i.length-1]==126){var n=new a.default.JTHeader;n.FillByBinary(i,1);if(this.JX808Data(n,i,n.GetLength()+1)){return}}var r=String.fromCharCode.apply(null,i);var s=JSON.parse(r);this.callback(s)}},{key:"JX808Data",value:function e(t,i,n){switch(t.MsgId){case 34960:var r=new a.default.JT0x8890;r.FillByBinary(i,n);if(this.wfs.config.events){if(r.NType==0){if(this.wfs.config.events.onDevConnect){this.wfs.config.events.onDevConnect(this.wfs.video_id,this.wfs)}if(this.wfs.config.events.onServerNotice){this.wfs.config.events.onServerNotice("onDevConnect",this.wfs.video_id,this.wfs)}}if(r.NType==1){if(this.wfs.config.events.onDevDisconnect){this.wfs.config.events.onDevDisconnect(this.wfs.video_id,this.wfs)}if(this.wfs.config.events.onServerNotice){this.wfs.config.events.onServerNotice("onDevDisconnect",this.wfs.video_id,this.wfs)}}if(r.NType==2){if(this.wfs.config.events.onEndByServer){if(this.wfs.config.events.onEndByServer(r.Notice,this.wfs.video_id,this.wfs)){this.wfs.CloseSocket();return true}}this.wfs.Stop()}}return true}return false}}]);return t}();i.default=f},{"../JX/JTT1078":1,"../utils/logger":9}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();var r=e("../helper/ByteHelper");var s=u(r);var a=e("../utils/logger");var o=u(a);function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function t(e){h(this,t);this.wfs=e;this.ok=false}n(t,[{key:"destroy",value:function e(){this.close()}},{key:"getConnByCluster",value:function e(t,i,n,r){this.callback=r;var s=this;var a=true;this.wss=wx.connectSocket({url:"wss://"+t+":"+i,complete:function e(t){o.default.debug("ClusterConnect",t)}});this.wss.onClose(function(e){o.default.debug("ClusterClosed",e);if(!this.ok&&this.wfs.config.events){if(this.wfs.config.events.onWsClose){this.wfs.config.events.onWsClose(this.wfs.video_id,this.wfs)}if(this.wfs.config.events.onServerNotice){this.wfs.config.events.onServerNotice("onWsClose",this.wfs.video_id,this.wfs)}this.wfs.Stop()}}.bind(this));this.wss.onMessage(function(e){s.receive(e)});this.wss.onOpen(function(e){if(a){a=false;o.default.debug("ClusterOpen",e);s.send(n)}});if(a&&this.wss.readyState==1){a=false;o.default.debug("ClusterOpen2",res);s.send(n)}}},{key:"close",value:function e(){if(this.wss){this.wss.close({complete:function e(t){o.default.debug("CloseCluster",t)}});this.wss=null}}},{key:"send",value:function e(t){var i=new Uint8Array([1,0,0,3,235,0,0,0,0,0,0,0,0,0,0,0,0]);s.default.StringToGBK(i,5,t);this.wss.send({data:i.buffer,complete:function e(t){o.default.debug("ClusterSendMessage",t)}})}},{key:"receive",value:function e(t){var i=new Uint8Array(t.data);var n=s.default.GBKToString(i);this.ok=/[^:]+:\d+.*/.test(n);this.callback(n,this)}}]);return t}();i.default=f},{"../helper/ByteHelper":3,"../utils/logger":9}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();var r=e("./utils/cvComm");var d=l(r);var s=e("./loader/wxwssCluster");var a=l(s);var o=e("./loader/wxwss");var u=l(o);var h=e("./utils/logger");var f=l(h);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var g=function(){function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};c(this,t);this.config=e;this.socketCreatedId=0;this.StartID=0;this.time_id=-1}n(t,[{key:"onHlsInfo",value:function e(t){this.rtmp_url=t.ServerAddr;this.clientid=t.ClinetID;this.StartHeartbeat()}},{key:"StartRealTimeVideo",value:function e(t,i,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;this.Stop();this.IsRequestPlay=true;this.createSocketAndSendCmd(i,n,function(){if(s){this.wss.jt1078.Send9101Rtmp(i,n,0,r)}else{this.wss.jt1078.Send9101Rtmp(i,n,1,r)}}.bind(this),function(e){this.onHlsInfo(e);t(this.rtmp_url)}.bind(this))}},{key:"PlaybackVideo",value:function e(t,i,n,r){var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var u=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;var h=arguments[8];var f=arguments.length>9&&arguments[9]!==undefined?arguments[9]:"";var l=arguments.length>10&&arguments[10]!==undefined?arguments[10]:0;i=d.default.SimLen12(i);this.Stop();this.IsRequestPlay=true;this.createSocketAndSendCmd(i,n,function(){this.IsPlay=true;this.wss.jt1078.Send9201Rtmp(i,n,r,s,a,o,u,h,f,l)}.bind(this),function(e){this.onHlsInfo(e);t(this.rtmp_url)}.bind(this))}},{key:"createSocketAndSendCmd",value:function e(t,i,n,r){t=d.default.SimLen12(t);this.Sim=t;this.Channel=i;var s=this.socketCreatedId;this.CloseSocket();this.cluster=new a.default(this);this.cluster.getConnByCluster(this.config.clusterHost,this.config.clusterPort,t,function(e,t){this.CloseSocket();if(e!=null){var i=e.split(":");if(s==this.socketCreatedId){this.wss=new u.default(this);this.wss.conn(i[0],i[1],n,r)}}}.bind(this))}},{key:"CloseSocket",value:function e(){if(this.cluster){this.cluster.close();this.cluster=null}if(this.wss){this.wss.close();this.wss=null;this.socketCreatedId++}this.StopHeartbeat()}},{key:"Stop",value:function e(){var t=this.IsRequestPlay;this.IsRequestPlay=false;this.CloseSocket();if(t){if(this.config.events&&this.config.events.onStop){this.config.events.onStop(this.video_id,this)}}}},{key:"StartHeartbeat",value:function e(){this.StartID++;if(this.time_id===-1){this.time_id=setInterval(this.SendHeartbeatPackage.bind(this),1e3*5)}}},{key:"StopHeartbeat",value:function e(){if(this.time_id!=-1){clearInterval(this.time_id);this.time_id=-1;this.StartID++}}},{key:"SendHeartbeatPackage",value:function e(){this.wss.jt1078.SendHeartRtmp(this.Sim,this.Channel,this.rtmp_url,this.clientid)}}],[{key:"logger",get:function e(){return f.default}}]);return t}();f.default.SetLevel(1);i.default=g},{"./loader/wxwss":5,"./loader/wxwssCluster":6,"./utils/cvComm":8,"./utils/logger":9}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function t(){r(this,t)}n(t,null,[{key:"SimLen12",value:function e(t){if(typeof t!=="string"){t=String(t)}if(t.length>12){return t.substr(0,12)}else{while(t.length<12){t="0"+t}return t}}},{key:"IsHttps",value:function e(){if(document){return document.location.protocol=="https:"}else{return true}}},{key:"GetWsp",value:function e(){if(t.IsHttps()){return"wss://"}else{return"ws://"}}}]);return t}();i.default=s},{}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var u=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function o(){r(this,o)}n(o,null,[{key:"SetLevel",value:function e(t){o.level=t}},{key:"SetTag",value:function e(t){if(typeof o.tags=="undefined")o.tags=new Map;o.tags.set(t,1)}},{key:"debug",value:function e(t){var i;if(typeof o.level!="undefined"&&o.level>0){return}for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++){r[s-1]=arguments[s]}(i=console).log.apply(i,["debug:"+(new Date).toLocaleTimeString()+" :"+t].concat(r))}},{key:"warn",value:function e(t){var i;if(typeof o.level!="undefined"&&o.level>1){return}for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++){r[s-1]=arguments[s]}(i=console).log.apply(i,["warn:"+(new Date).toLocaleTimeString()+" :"+t].concat(r))}},{key:"error",value:function e(t){var i;if(typeof o.level!="undefined"&&o.level>2){return}for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++){r[s-1]=arguments[s]}(i=console).log.apply(i,["error "+(new Date).toLocaleTimeString()+" :"+t].concat(r))}},{key:"custom",value:function e(t,i){var n;if(typeof o.tags=="undefined")return;if(!u(o.tags.has(t)))return;for(var r=arguments.length,s=Array(r>2?r-2:0),a=2;a<r;a++){s[a-2]=arguments[a]}(n=console).log.apply(n,["tag:"+t+" "+(new Date).toLocaleTimeString()+" :"+i].concat(s))}},{key:"downArrayBuffer",value:function e(t,i){var n=new Blob([t]);var r=document.createElement("a");r.download=i;r.style.display="none";r.href=URL.createObjectURL(n);document.body.appendChild(r);r.click();URL.revokeObjectURL(r.href);document.body.removeChild(r)}},{key:"downUint8Arrays",value:function e(t,i){var n=new Blob(t);var r=document.createElement("a");r.download=i;r.style.display="none";r.href=URL.createObjectURL(n);document.body.appendChild(r);r.click();URL.revokeObjectURL(r.href);document.body.removeChild(r)}},{key:"diffTimeStr",value:function e(t,i){var n=i.getTime()-t.getTime();var r=Math.floor(n/(24*3600*1e3));var s=n%(24*3600*1e3);var a=Math.floor(s/(3600*1e3));var o=s%(3600*1e3);var u=Math.floor(o/(60*1e3));var h=o%(60*1e3);var f=Math.round(h/1e3);var l=f.toString();if(f<10){l="0"+l}l=u+":"+l;if(u<10){l="0"+l}if(a>0){l=a+":"+l}if(r>0){l=r+"d"+l}return l}}]);return o}();i.default=s},{}],10:[function(e,t,i){"use strict";t.exports=r;var v=null;try{v=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,i){this.low=e|0;this.high=t|0;this.unsigned=!!i}r.prototype.__isLong__;Object.defineProperty(r.prototype,"__isLong__",{value:true});function y(e){return(e&&e["__isLong__"])===true}r.isLong=y;var s={};var a={};function n(e,t){var i,n,r;if(t){e>>>=0;if(r=0<=e&&e<256){n=a[e];if(n)return n}i=w(e,(e|0)<0?-1:0,true);if(r)a[e]=i;return i}else{e|=0;if(r=-128<=e&&e<128){n=s[e];if(n)return n}i=w(e,e<0?-1:0,false);if(r)s[e]=i;return i}}r.fromInt=n;function T(e,t){if(isNaN(e))return t?g:p;if(t){if(e<0)return g;if(e>=d)return I}else{if(e<=-c)return C;if(e+1>=c)return _}if(e<0)return T(-e,t).neg();return w(e%h|0,e/h|0,t)}r.fromNumber=T;function w(e,t,i){return new r(e,t,i)}r.fromBits=w;var l=Math.pow;function f(e,t,i){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return p;if(typeof t==="number"){i=t,t=false}else{t=!!t}i=i||10;if(i<2||36<i)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");else if(n===0){return f(e.substring(1),t,i).neg()}var r=T(l(i,8));var s=p;for(var a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+o),i);if(o<8){var h=T(l(i,o));s=s.mul(h).add(T(u))}else{s=s.mul(r);s=s.add(T(u))}}s.unsigned=t;return s}r.fromString=f;function S(e,t){if(typeof e==="number")return T(e,t);if(typeof e==="string")return f(e,t);return w(e.low,e.high,typeof t==="boolean"?t:e.unsigned)}r.fromValue=S;var o=1<<16;var u=1<<24;var h=o*o;var d=h*h;var c=d/2;var m=n(u);var p=n(0);r.ZERO=p;var g=n(0,true);r.UZERO=g;var b=n(1);r.ONE=b;var B=n(1,true);r.UONE=B;var k=n(-1);r.NEG_ONE=k;var _=w(4294967295|0,2147483647|0,false);r.MAX_VALUE=_;var I=w(4294967295|0,4294967295|0,true);r.MAX_UNSIGNED_VALUE=I;var C=w(0,2147483648|0,false);r.MIN_VALUE=C;var L=r.prototype;L.toInt=function e(){return this.unsigned?this.low>>>0:this.low};L.toNumber=function e(){if(this.unsigned)return(this.high>>>0)*h+(this.low>>>0);return this.high*h+(this.low>>>0)};L.toString=function e(t){t=t||10;if(t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var i=T(t),n=this.div(i),r=n.mul(i).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t)}var s=T(l(t,6),this.unsigned),a=this;var o="";while(true){var u=a.div(s),h=a.sub(u.mul(s)).toInt()>>>0,f=h.toString(t);a=u;if(a.isZero())return f+o;else{while(f.length<6){f="0"+f}o=""+f+o}}};L.getHighBits=function e(){return this.high};L.getHighBitsUnsigned=function e(){return this.high>>>0};L.getLowBits=function e(){return this.low};L.getLowBitsUnsigned=function e(){return this.low>>>0};L.getNumBitsAbs=function e(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();var t=this.high!=0?this.high:this.low;for(var i=31;i>0;i--){if((t&1<<i)!=0)break}return this.high!=0?i+33:i+1};L.isZero=function e(){return this.high===0&&this.low===0};L.eqz=L.isZero;L.isNegative=function e(){return!this.unsigned&&this.high<0};L.isPositive=function e(){return this.unsigned||this.high>=0};L.isOdd=function e(){return(this.low&1)===1};L.isEven=function e(){return(this.low&1)===0};L.equals=function e(t){if(!y(t))t=S(t);if(this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1)return false;return this.high===t.high&&this.low===t.low};L.eq=L.equals;L.notEquals=function e(t){return!this.eq(t)};L.neq=L.notEquals;L.ne=L.notEquals;L.lessThan=function e(t){return this.comp(t)<0};L.lt=L.lessThan;L.lessThanOrEqual=function e(t){return this.comp(t)<=0};L.lte=L.lessThanOrEqual;L.le=L.lessThanOrEqual;L.greaterThan=function e(t){return this.comp(t)>0};L.gt=L.greaterThan;L.greaterThanOrEqual=function e(t){return this.comp(t)>=0};L.gte=L.greaterThanOrEqual;L.ge=L.greaterThanOrEqual;L.compare=function e(t){if(!y(t))t=S(t);if(this.eq(t))return 0;var i=this.isNegative(),n=t.isNegative();if(i&&!n)return-1;if(!i&&n)return 1;if(!this.unsigned)return this.sub(t).isNegative()?-1:1;return t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1};L.comp=L.compare;L.negate=function e(){if(!this.unsigned&&this.eq(C))return C;return this.not().add(b)};L.neg=L.negate;L.add=function e(t){if(!y(t))t=S(t);var i=this.high>>>16;var n=this.high&65535;var r=this.low>>>16;var s=this.low&65535;var a=t.high>>>16;var o=t.high&65535;var u=t.low>>>16;var h=t.low&65535;var f=0,l=0,d=0,c=0;c+=s+h;d+=c>>>16;c&=65535;d+=r+u;l+=d>>>16;d&=65535;l+=n+o;f+=l>>>16;l&=65535;f+=i+a;f&=65535;return w(d<<16|c,f<<16|l,this.unsigned)};L.subtract=function e(t){if(!y(t))t=S(t);return this.add(t.neg())};L.sub=L.subtract;L.multiply=function e(t){if(this.isZero())return p;if(!y(t))t=S(t);if(v){var i=v["mul"](this.low,this.high,t.low,t.high);return w(i,v["get_high"](),this.unsigned)}if(t.isZero())return p;if(this.eq(C))return t.isOdd()?C:p;if(t.eq(C))return this.isOdd()?C:p;if(this.isNegative()){if(t.isNegative())return this.neg().mul(t.neg());else return this.neg().mul(t).neg()}else if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(m)&&t.lt(m))return T(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16;var r=this.high&65535;var s=this.low>>>16;var a=this.low&65535;var o=t.high>>>16;var u=t.high&65535;var h=t.low>>>16;var f=t.low&65535;var l=0,d=0,c=0,g=0;g+=a*f;c+=g>>>16;g&=65535;c+=s*f;d+=c>>>16;c&=65535;c+=a*h;d+=c>>>16;c&=65535;d+=r*f;l+=d>>>16;d&=65535;d+=s*h;l+=d>>>16;d&=65535;d+=a*u;l+=d>>>16;d&=65535;l+=n*f+r*h+s*u+a*o;l&=65535;return w(c<<16|g,l<<16|d,this.unsigned)};L.mul=L.multiply;L.divide=function e(t){if(!y(t))t=S(t);if(t.isZero())throw Error("division by zero");if(v){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1){return this}var i=(this.unsigned?v["div_u"]:v["div_s"])(this.low,this.high,t.low,t.high);return w(i,v["get_high"](),this.unsigned)}if(this.isZero())return this.unsigned?g:p;var n,r,s;if(!this.unsigned){if(this.eq(C)){if(t.eq(b)||t.eq(k))return C;else if(t.eq(C))return b;else{var a=this.shr(1);n=a.div(t).shl(1);if(n.eq(p)){return t.isNegative()?b:k}else{r=this.sub(t.mul(n));s=n.add(r.div(t));return s}}}else if(t.eq(C))return this.unsigned?g:p;if(this.isNegative()){if(t.isNegative())return this.neg().div(t.neg());return this.neg().div(t).neg()}else if(t.isNegative())return this.div(t.neg()).neg();s=p}else{if(!t.unsigned)t=t.toUnsigned();if(t.gt(this))return g;if(t.gt(this.shru(1)))return B;s=g}r=this;while(r.gte(t)){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));var o=Math.ceil(Math.log(n)/Math.LN2),u=o<=48?1:l(2,o-48),h=T(n),f=h.mul(t);while(f.isNegative()||f.gt(r)){n-=u;h=T(n,this.unsigned);f=h.mul(t)}if(h.isZero())h=b;s=s.add(h);r=r.sub(f)}return s};L.div=L.divide;L.modulo=function e(t){if(!y(t))t=S(t);if(v){var i=(this.unsigned?v["rem_u"]:v["rem_s"])(this.low,this.high,t.low,t.high);return w(i,v["get_high"](),this.unsigned)}return this.sub(this.div(t).mul(t))};L.mod=L.modulo;L.rem=L.modulo;L.not=function e(){return w(~this.low,~this.high,this.unsigned)};L.and=function e(t){if(!y(t))t=S(t);return w(this.low&t.low,this.high&t.high,this.unsigned)};L.or=function e(t){if(!y(t))t=S(t);return w(this.low|t.low,this.high|t.high,this.unsigned)};L.xor=function e(t){if(!y(t))t=S(t);return w(this.low^t.low,this.high^t.high,this.unsigned)};L.shiftLeft=function e(t){if(y(t))t=t.toInt();if((t&=63)===0)return this;else if(t<32)return w(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned);else return w(0,this.low<<t-32,this.unsigned)};L.shl=L.shiftLeft;L.shiftRight=function e(t){if(y(t))t=t.toInt();if((t&=63)===0)return this;else if(t<32)return w(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned);else return w(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};L.shr=L.shiftRight;L.shiftRightUnsigned=function e(t){if(y(t))t=t.toInt();if((t&=63)===0)return this;if(t<32)return w(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned);if(t===32)return w(this.high,0,this.unsigned);return w(this.high>>>t-32,0,this.unsigned)};L.shru=L.shiftRightUnsigned;L.shr_u=L.shiftRightUnsigned;L.rotateLeft=function e(t){var i;if(y(t))t=t.toInt();if((t&=63)===0)return this;if(t===32)return w(this.high,this.low,this.unsigned);if(t<32){i=32-t;return w(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)}t-=32;i=32-t;return w(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned)};L.rotl=L.rotateLeft;L.rotateRight=function e(t){var i;if(y(t))t=t.toInt();if((t&=63)===0)return this;if(t===32)return w(this.high,this.low,this.unsigned);if(t<32){i=32-t;return w(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)}t-=32;i=32-t;return w(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned)};L.rotr=L.rotateRight;L.toSigned=function e(){if(!this.unsigned)return this;return w(this.low,this.high,false)};L.toUnsigned=function e(){if(this.unsigned)return this;return w(this.low,this.high,true)};L.toBytes=function e(t){return t?this.toBytesLE():this.toBytesBE()};L.toBytesLE=function e(){var t=this.high,i=this.low;return[i&255,i>>>8&255,i>>>16&255,i>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};L.toBytesBE=function e(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,i>>>24,i>>>16&255,i>>>8&255,i&255]};r.fromBytes=function e(t,i,n){return n?r.fromBytesLE(t,i):r.fromBytesBE(t,i)};r.fromBytesLE=function e(t,i){return new r(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)};r.fromBytesBE=function e(t,i){return new r(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)}},{}]},{},[4])(4)});